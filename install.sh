#!/bin/bash

export DEFAULT_STAGE="artemis-beta1-dev"
export DEFAULT_DEBUG="false"

EPOCH_TIME=$(date +%s)
WORKING_PATH=$(realpath $0)
WORKING_DIR=$(dirname $WORKING_PATH)
CONF_INI="$WORKING_DIR/$EPOCH_TIME.ini"
CONF_BIN="W2RlZmF1bHRdCnRpdGxlID0gT3Jicml1bQp0ZW5hbnQgPSBvcmJyaXVtCmRvbWFpbiA9ICRERUZBVUxUX0RPTUFJTgplbmRwb2ludCA9ICRERUZBVUxUX0VORFBPSU5UCm9yaWdpbnMgPSBodHRwczovLyRERUZBVUxUX0VORFBPSU5ULCBodHRwczovL2xvY2FsaG9zdAoKdWlfcm91dGVyID0gY2xpZW50CgpkYXRhYmFzZSA9IHB5Z21hCgp2ZXJzaW9uID0gMQpzdGFnZSA9ICRERUZBVUxUX1NUQUdFCmRlYnVnID0gJERFRkFVTFRfREVCVUcKCnN5c3RlbV9hY2Nlc3Nfa2V5ID0gJFNZU1RFTV9BQ0NFU1NfS0VZCnN5c3RlbV9zZWNyZXRfa2V5ID0gJFNZU1RFTV9TRUNSRVRfS0VZCmFkbWluX3VzZXJuYW1lID0gJERFRkFVTFRfQURNSU5fVVNFUk5BTUUKYWRtaW5fcGFzc3dvcmQgPSAkREVGQVVMVF9BRE1JTl9QQVNTV09SRAphZG1pbl9ncm91cCA9IEFkbWluaXN0cmF0b3JzCmFkbWluX3JvbGUgPSBhZG1pbgp1c2VyX2dyb3VwID0gVXNlcnMKdXNlcl9yb2xlID0gdXNlcgoKaGVhbHRoX2NoZWNrX2ludGVydmFsID0gNQpoZWFsdGhfY2hlY2tfdGltZW91dCA9IDIKaGVhbHRoX2NoZWNrX3JldHJpZXMgPSAzCgptb2R1bGVzID0gbGRhcCwgcG9zdGdyZXNxbCwgZWxhc3RpY3NlYXJjaCwgcmVkaXMsIGtleWNsb2FrLCBtaW5pbywgZ3VhY2QsIGd1YWNhbW9sZSwgY29yZSwgYWNjb3VudCwgcm91dGVyLCB0b29sLCBzZWNyZXQsIGNsb3VkLCBhY29sLCBhcHJ4LCBiaW50LCBuZ2lueApwcm94aWVzID0gY29yZSwgYWNjb3VudCwgcm91dGVyLCB0b29sLCBzZWNyZXQsIGNsb3VkLCBhY29sLCBhcHJ4LCBiaW50CgpbZGVmYXVsdDphY2xdClVzZXIgPSByCkdyb3VwID0gcgppbmZvLlB1YmxpYyA9IHIKaW5mby5SZXN0cmljdCA9IGNydWQKaW5mby5Qcml2YXRlID0gY3J1ZApib2FyZC5Bbm5vdW5jZW1lbnQgPSByCmJvYXJkLk5vdGlmaWNhdGlvbiA9IHIKYm9hcmQuR3JvdXBNZW1vID0gY3J1ZApib2FyZC5Vc2VyTWVtbyA9IGNydWQKcHVicy5QYXJ0eSA9IGNydWQKcHVicy5NZW1iZXIgPSBydQpwdWJzLkNvbnRlbnQgPSBjcnVkCmRhdGEuR3JvdXBCdWNrZXQgPSBjcnVkCmRhdGEuVXNlckJ1Y2tldCA9IGNydWQKCm9yZy5FbmRwb2ludCA9IHIKb3JnLkFwcHJvdmFsID0gcnUKb3JnLlJlcXVlc3QgPSByCnJlZ2lvbi5Qcm9qZWN0ID0gcgpyZWdpb24uRGVwbG95bWVudCA9IHIKcmVnaW9uLlJlc291cmNlID0gcgoKW2RlZmF1bHQ6cmVzdHJpY3RdCnVzZXJzID0ge2luaVsnZGVmYXVsdC5hZG1pbl91c2VybmFtZSddfSwgc3lzdGVtCmdyb3VwcyA9IGFkbWluLCBBZG1pbiwgQWRtaW5pc3RyYXRvcnMsIHVzZXIsIFVzZXJzLCBjb25zb2xlQWRtaW4sIGRpYWdub3N0aWNzLCByZWFkb25seSwgd3JpdGVvbmx5LCByZWFkd3JpdGUKCltkZWZhdWx0OnNtdHBdCmhvc3RuYW1lID0gJFNNVFBfSE9TVE5BTUUKaG9zdHBvcnQgPSAkU01UUF9IT1NUUE9SVAp1c2VybmFtZSA9ICRTTVRQX1VTRVJOQU1FCnBhc3N3b3JkID0gJFNNVFBfUEFTU1dPUkQKdGxzID0gJFNNVFBfVExTCnNzbCA9ICRTTVRQX1NTTAoKCiMgQ0xPVUQgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpbY2xvdWRdCmhvc3RuYW1lID0gY2xvdWQKaG9zdGFkZHIgPSAwLjAuMC4wCmhvc3Rwb3J0ID0gODA4MApoZWFsdGhjaGVjayA9IHRydWUKCndvcmtlcnMgPSA0Cgp3c2FfYWRtaW5fdXNlcm5hbWUgPSAkV1NBX0FETUlOX1VTRVJOQU1FCndzYV9hZG1pbl9wYXNzd29yZCA9ICRXU0FfQURNSU5fUEFTU1dPUkQKd3NhX2hvc3RuYW1lID0gJFdTQV9IT1NUTkFNRQp3c2FfY2xpZW50X2lkID0gJFdTQV9DTElFTlRfSUQKd3NhX2NsaWVudF9zZWNyZXQgPSAkV1NBX0NMSUVOVF9TRUNSRVQKd3NhX2F1dG9fY2xpZW50X3ByZWZpeCA9IHByZWx1ZGUtdXNlci0KCmNsb3VkX2RvbWFpbiA9ICRDTE9VRF9ET01BSU4KYWRtaW5fcHJvamVjdCA9ICRBRE1JTl9QUk9KRUNUCnByaW1lX3Byb2plY3QgPSAkUFJJTUVfUFJPSkVDVApzeW5jX2ludGVydmFsID0gNjAwCnN5bmNfcmVzdGFydF9pbnRlcnZhbCA9IDYwCgpbY2xvdWQ6cmVzb3VyY2VfdHlwZXNfYW5kX3Jlc3RyaWN0X2FjdGlvbnNdCkNsb3VkLnZTcGhlcmUuTWFjaGluZSA9IENsb3VkLnZTcGhlcmUuTWFjaGluZS5VcGRhdGUuVGFncywgQ2xvdWQudlNwaGVyZS5NYWNoaW5lLlJlc2V0LCBDbG91ZC52U3BoZXJlLk1hY2hpbmUuUmVidWlsZCwgQ2xvdWQudlNwaGVyZS5NYWNoaW5lLlVucmVnaXN0ZXIsIENsb3VkLnZTcGhlcmUuTWFjaGluZS5BcHBseVNhbHRDb25maWd1cmF0aW9uLCBDbG91ZC52U3BoZXJlLk1hY2hpbmUuQXR0YWNoU2FsdFN0YWNrUmVzb3VyY2UsIENsb3VkLnZTcGhlcmUuTWFjaGluZS5SZW1vdGUuQ29uc29sZSwgQ2xvdWQudlNwaGVyZS5NYWNoaW5lLkNoYW5nZS5TZWN1cml0eUdyb3VwCkNsb3VkLk5TWC5OZXR3b3JrID0KQ2xvdWQuTlNYLkxvYWRCYWxhbmNlciA9CkNsb3VkLlNlY3VyaXR5R3JvdXAgPQpDbG91ZC52U3BoZXJlLkRpc2sgPSBDbG91ZC52U3BoZXJlLkRpc2suRGlzay5DaGFuZ2UuRGlzcGxheS5OYW1lLCBDbG91ZC52U3BoZXJlLkRpc2suVXBkYXRlLlRhZ3MKQ3VzdG9tLlByb2plY3QgPQpDdXN0b20uVlBDID0KQ3VzdG9tLkFJUCA9CkN1c3RvbS5QZWVyaW5nID0KQ3VzdG9tLk5GUyA9CkN1c3RvbS5EU01EQiA9CkN1c3RvbS5LdWJlcm5ldGVzID0KCltjbG91ZDpidWlsZF0KaW1hZ2UgPSBjb21tb246YmFzZQpzY3JpcHQgPQoJQUREIHtzZWN0aW9uLnJlcGxhY2UoJzpidWlsZCcsICcnKX0gL29wdC97c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9CglBREQgd2ViY2VydCAvb3B0L3dlYmNlcnQKCUFERCBjb21tb24gL29wdC9jb21tb24KCUFERCBkcml2ZXIgL29wdC9kcml2ZXIKCUFERCBzY2hlbWEgL29wdC9zY2hlbWEKCUFERCBjb25maWcuaW5pIC9vcHQvY29uZmlnLmluaQoJQ01EIFsicHl0aG9uIiwgIntzZWN0aW9uLnJlcGxhY2UoJzpidWlsZCcsICcnKX0iXQoJSEVBTFRIQ0hFQ0sgXAoJCS0taW50ZXJ2YWw9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfaW50ZXJ2YWwnXX1zIFwKCQktLXRpbWVvdXQ9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfdGltZW91dCddfXMgXAoJCS0tcmV0cmllcz17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja19yZXRyaWVzJ119IFwKCQlDTUQgY3VybCAtayBodHRwczovL2xvY2FsaG9zdDo4MDgwL2ludGVybmFsL2hlYWx0aCB8fCBleGl0IDEKCiNbY2xvdWQ6bW91bnRzXQojW2Nsb3VkOmVudmlyb25tZW50XQojW2Nsb3VkOnBvcnRzXQojW2Nsb3VkOnZvbHVtZXNdCgoKIyBBVVRPTUFUSU9OIENPTExFQ1RPUiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjClthY29sXQpob3N0bmFtZSA9IGFjb2wKaG9zdGFkZHIgPSAwLjAuMC4wCmhvc3Rwb3J0ID0gODA4MApoZWFsdGhjaGVjayA9IHRydWUKCiMgZG9uJ3QgY2hhbmdlIHdvcmtlcnMgY291bnQKd29ya2VycyA9IDEKClthY29sOmJ1aWxkXQppbWFnZSA9IGNvbW1vbjpiYXNlCnNjcmlwdCA9CglSVU4gcGlwIGluc3RhbGwgLS1uby1jYWNoZS1kaXIgcHN1dGlsCglBREQge3NlY3Rpb24ucmVwbGFjZSgnOmJ1aWxkJywgJycpfSAvb3B0L3tzZWN0aW9uLnJlcGxhY2UoJzpidWlsZCcsICcnKX0KCUFERCB3ZWJjZXJ0IC9vcHQvd2ViY2VydAoJQUREIGNvbW1vbiAvb3B0L2NvbW1vbgoJQUREIGRyaXZlciAvb3B0L2RyaXZlcgoJQUREIHNjaGVtYSAvb3B0L3NjaGVtYQoJQUREIGNvbmZpZy5pbmkgL29wdC9jb25maWcuaW5pCglDTUQgWyJweXRob24iLCAie3NlY3Rpb24ucmVwbGFjZSgnOmJ1aWxkJywgJycpfSJdCglIRUFMVEhDSEVDSyBcCgkJLS1pbnRlcnZhbD17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja19pbnRlcnZhbCddfXMgXAoJCS0tdGltZW91dD17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja190aW1lb3V0J119cyBcCgkJLS1yZXRyaWVzPXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX3JldHJpZXMnXX0gXAoJCUNNRCBjdXJsIC1rIGh0dHBzOi8vbG9jYWxob3N0OjgwODAvaW50ZXJuYWwvaGVhbHRoIHx8IGV4aXQgMQoKI1thY29sOm1vdW50c10KI1thY29sOmVudmlyb25tZW50XQojW2Fjb2w6cG9ydHNdCiNbYWNvbDp2b2x1bWVzXQoKCiMgQVVUT01BVElPTiBQUk9YWSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpbYXByeF0KaG9zdG5hbWUgPSBhcHJ4Cmhvc3RhZGRyID0gMC4wLjAuMApob3N0cG9ydCA9IDgwODAKaGVhbHRoY2hlY2sgPSB0cnVlCgp3b3JrZXJzID0gNAoKW2Fwcng6YnVpbGRdCmltYWdlID0gY29tbW9uOmJhc2UKc2NyaXB0ID0KCUFERCB7c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9IC9vcHQve3NlY3Rpb24ucmVwbGFjZSgnOmJ1aWxkJywgJycpfQoJQUREIHdlYmNlcnQgL29wdC93ZWJjZXJ0CglBREQgY29tbW9uIC9vcHQvY29tbW9uCglBREQgZHJpdmVyIC9vcHQvZHJpdmVyCglBREQgc2NoZW1hIC9vcHQvc2NoZW1hCglBREQgY29uZmlnLmluaSAvb3B0L2NvbmZpZy5pbmkKCUNNRCBbInB5dGhvbiIsICJ7c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9Il0KCUhFQUxUSENIRUNLIFwKCQktLWludGVydmFsPXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX2ludGVydmFsJ119cyBcCgkJLS10aW1lb3V0PXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX3RpbWVvdXQnXX1zIFwKCQktLXJldHJpZXM9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfcmV0cmllcyddfSBcCgkJQ01EIGN1cmwgLWsgaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MC9pbnRlcm5hbC9oZWFsdGggfHwgZXhpdCAxCgojW2Fwcng6bW91bnRzXQojW2Fwcng6ZW52aXJvbm1lbnRdCiNbYXByeDpwb3J0c10KI1thcHJ4OnZvbHVtZXNdCgoKIyBCVVNJTkVTUyBJTlRFR1JBVElPTiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCltiaW50XQpob3N0bmFtZSA9IGJpbnQKaG9zdGFkZHIgPSAwLjAuMC4wCmhvc3Rwb3J0ID0gODA4MApoZWFsdGhjaGVjayA9IHRydWUKCndvcmtlcnMgPSAyCgpbYmludDpidWlsZF0KaW1hZ2UgPSBjb21tb246YmFzZQpzY3JpcHQgPQoJQUREIHtzZWN0aW9uLnJlcGxhY2UoJzpidWlsZCcsICcnKX0gL29wdC97c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9CglBREQgd2ViY2VydCAvb3B0L3dlYmNlcnQKCUFERCBjb21tb24gL29wdC9jb21tb24KCUFERCBkcml2ZXIgL29wdC9kcml2ZXIKCUFERCBzY2hlbWEgL29wdC9zY2hlbWEKCUFERCBjb25maWcuaW5pIC9vcHQvY29uZmlnLmluaQoJQ01EIFsicHl0aG9uIiwgIntzZWN0aW9uLnJlcGxhY2UoJzpidWlsZCcsICcnKX0iXQoJSEVBTFRIQ0hFQ0sgXAoJCS0taW50ZXJ2YWw9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfaW50ZXJ2YWwnXX1zIFwKCQktLXRpbWVvdXQ9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfdGltZW91dCddfXMgXAoJCS0tcmV0cmllcz17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja19yZXRyaWVzJ119IFwKCQlDTUQgY3VybCAtayBodHRwczovL2xvY2FsaG9zdDo4MDgwL2ludGVybmFsL2hlYWx0aCB8fCBleGl0IDEKCiNbYmludDptb3VudHNdCiNbYmludDplbnZpcm9ubWVudF0KI1tiaW50OnBvcnRzXQojW2JpbnQ6dm9sdW1lc10KCgojIFNFQ1JFVCAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKW3NlY3JldF0KaG9zdG5hbWUgPSBzZWNyZXQKaG9zdGFkZHIgPSAwLjAuMC4wCmhvc3Rwb3J0ID0gODA4MApoZWFsdGhjaGVjayA9IHRydWUKCndvcmtlcnMgPSA0Cgpbc2VjcmV0OmJ1aWxkXQppbWFnZSA9IGNvbW1vbjpiYXNlCnNjcmlwdCA9CglSVU4gcGlwIGluc3RhbGwgLS1uby1jYWNoZS1kaXIgcHlPcGVuU1NMCglBREQge3NlY3Rpb24ucmVwbGFjZSgnOmJ1aWxkJywgJycpfSAvb3B0L3tzZWN0aW9uLnJlcGxhY2UoJzpidWlsZCcsICcnKX0KCUFERCB3ZWJjZXJ0IC9vcHQvd2ViY2VydAoJQUREIGNvbW1vbiAvb3B0L2NvbW1vbgoJQUREIGRyaXZlciAvb3B0L2RyaXZlcgoJQUREIHNjaGVtYSAvb3B0L3NjaGVtYQoJQUREIGNvbmZpZy5pbmkgL29wdC9jb25maWcuaW5pCglDTUQgWyJweXRob24iLCAie3NlY3Rpb24ucmVwbGFjZSgnOmJ1aWxkJywgJycpfSJdCglIRUFMVEhDSEVDSyBcCgkJLS1pbnRlcnZhbD17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja19pbnRlcnZhbCddfXMgXAoJCS0tdGltZW91dD17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja190aW1lb3V0J119cyBcCgkJLS1yZXRyaWVzPXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX3JldHJpZXMnXX0gXAoJCUNNRCBjdXJsIC1rIGh0dHBzOi8vbG9jYWxob3N0OjgwODAvaW50ZXJuYWwvaGVhbHRoIHx8IGV4aXQgMQoKI1tzZWNyZXQ6bW91bnRzXQojW3NlY3JldDplbnZpcm9ubWVudF0KI1tzZWNyZXQ6cG9ydHNdCiNbc2VjcmV0OnZvbHVtZXNdCgoKIyBETlMgTUFOQUdFUiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCltkbnNtXQpob3N0bmFtZSA9IGRuc20KaG9zdGFkZHIgPSAwLjAuMC4wCmhvc3Rwb3J0ID0gODA4MApoZWFsdGhjaGVjayA9IHRydWUKCndvcmtlcnMgPSAxCgphY2NfZW5kcG9pbnQgPSBodHRwczovL3tpbmlbJ2FjY291bnQuaG9zdG5hbWUnXX06e2luaVsnYWNjb3VudC5ob3N0cG9ydCddfQphcGlfZW5kcG9pbnQgPSBodHRwczovL3tpbmlbJ3Rvb2wuaG9zdG5hbWUnXX06e2luaVsndG9vbC5ob3N0cG9ydCddfQojYWNjX2VuZHBvaW50ID0gaHR0cHM6Ly97aW5pWydkZWZhdWx0LmVuZHBvaW50J119CiNhcGlfZW5kcG9pbnQgPSBodHRwczovL3tpbmlbJ2RlZmF1bHQuZW5kcG9pbnQnXX0KCmRvbWFpbiA9IHtpbmlbJ2Nsb3VkLmNsb3VkX2RvbWFpbiddfQppbnRlcnZhbCA9IDUKCltkbnNtOnF1ZXJ5XQojcHJvcGVydGllcy5wcm9wZXJ0eSA9IHZhbHVlCgpbZG5zbTpidWlsZF0KaW1hZ2UgPSBjb21tb246YmFzZQpzY3JpcHQgPQoJQUREIHtzZWN0aW9uLnJlcGxhY2UoJzpidWlsZCcsICcnKX0gL29wdC97c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9CglBREQgd2ViY2VydCAvb3B0L3dlYmNlcnQKCUFERCBjb21tb24gL29wdC9jb21tb24KCUFERCBkcml2ZXIgL29wdC9kcml2ZXIKCUFERCBzY2hlbWEgL29wdC9zY2hlbWEKCUFERCBjb25maWcuaW5pIC9vcHQvY29uZmlnLmluaQoJQ01EIFsicHl0aG9uIiwgIntzZWN0aW9uLnJlcGxhY2UoJzpidWlsZCcsICcnKX0iXQoJSEVBTFRIQ0hFQ0sgXAoJCS0taW50ZXJ2YWw9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfaW50ZXJ2YWwnXX1zIFwKCQktLXRpbWVvdXQ9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfdGltZW91dCddfXMgXAoJCS0tcmV0cmllcz17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja19yZXRyaWVzJ119IFwKCQlDTUQgY3VybCAtayBodHRwczovL2xvY2FsaG9zdDo4MDgwL2ludGVybmFsL2hlYWx0aCB8fCBleGl0IDEKCiNbZG5zbTptb3VudHNdCiNbZG5zbTplbnZpcm9ubWVudF0KI1tkbnNtOnBvcnRzXQojW2Ruc206dm9sdW1lc10KCgojIEROUyBDTElFTlQgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKW2Ruc2NdCmhvc3RuYW1lID0gZG5zYwpob3N0YWRkciA9IDAuMC4wLjAKaG9zdHBvcnQgPSA4MDgwCmhlYWx0aGNoZWNrID0gdHJ1ZQoKd29ya2VycyA9IDEKCmRuc21fZW5kcG9pbnQgPSBodHRwczovL3tpbmlbJ2Ruc20uaG9zdG5hbWUnXX06e2luaVsnZG5zbS5ob3N0cG9ydCddfQojZG5zbV9lbmRwb2ludCA9IGh0dHBzOi8ve2luaVsnZGVmYXVsdC5lbmRwb2ludCddfQoKZG9tYWluID0ge2luaVsnY2xvdWQuY2xvdWRfZG9tYWluJ119CmludGVydmFsID0gNQpmaWxlX3RhZyA9IGRuc2MKCltkbnNjOmJ1aWxkXQppbWFnZSA9IGNvbW1vbjpiYXNlCnNjcmlwdCA9CglSVU4gbWtkaXIgLXAgL2hvc3RzLmQKCUFERCB7c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9IC9vcHQve3NlY3Rpb24ucmVwbGFjZSgnOmJ1aWxkJywgJycpfQoJQUREIHdlYmNlcnQgL29wdC93ZWJjZXJ0CglBREQgY29tbW9uIC9vcHQvY29tbW9uCglBREQgZHJpdmVyIC9vcHQvZHJpdmVyCglBREQgc2NoZW1hIC9vcHQvc2NoZW1hCglBREQgY29uZmlnLmluaSAvb3B0L2NvbmZpZy5pbmkKCUNNRCBbInB5dGhvbiIsICJ7c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9Il0KCUhFQUxUSENIRUNLIFwKCQktLWludGVydmFsPXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX2ludGVydmFsJ119cyBcCgkJLS10aW1lb3V0PXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX3RpbWVvdXQnXX1zIFwKCQktLXJldHJpZXM9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfcmV0cmllcyddfSBcCgkJQ01EIGN1cmwgLWsgaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MC9pbnRlcm5hbC9oZWFsdGggfHwgZXhpdCAxCgojW2Ruc2M6bW91bnRzXQojW2Ruc2M6ZW52aXJvbm1lbnRdCiNbZG5zYzpwb3J0c10KI1tkbnNjOnZvbHVtZXNdCgoKIyBUT09MICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjClt0b29sXQpob3N0bmFtZSA9IHRvb2wKaG9zdGFkZHIgPSAwLjAuMC4wCmhvc3Rwb3J0ID0gODA4MApoZWFsdGhjaGVjayA9IHRydWUKCndvcmtlcnMgPSA0CgpbdG9vbDpidWlsZF0KaW1hZ2UgPSBjb21tb246YmFzZQpzY3JpcHQgPQoJUlVOIHBpcCBpbnN0YWxsIC0tbm8tY2FjaGUtZGlyIGFpb3NtdHBsaWIKCUFERCB7c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9IC9vcHQve3NlY3Rpb24ucmVwbGFjZSgnOmJ1aWxkJywgJycpfQoJQUREIHdlYmNlcnQgL29wdC93ZWJjZXJ0CglBREQgY29tbW9uIC9vcHQvY29tbW9uCglBREQgZHJpdmVyIC9vcHQvZHJpdmVyCglBREQgc2NoZW1hIC9vcHQvc2NoZW1hCglBREQgY29uZmlnLmluaSAvb3B0L2NvbmZpZy5pbmkKCUNNRCBbInB5dGhvbiIsICJ7c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9Il0KCUhFQUxUSENIRUNLIFwKCQktLWludGVydmFsPXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX2ludGVydmFsJ119cyBcCgkJLS10aW1lb3V0PXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX3RpbWVvdXQnXX1zIFwKCQktLXJldHJpZXM9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfcmV0cmllcyddfSBcCgkJQ01EIGN1cmwgLWsgaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MC9pbnRlcm5hbC9oZWFsdGggfHwgZXhpdCAxCgojW3Rvb2w6bW91bnRzXQojW3Rvb2w6ZW52aXJvbm1lbnRdCiNbdG9vbDpwb3J0c10KI1t0b29sOnZvbHVtZXNdCgoKIyBST1VURVIgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCltyb3V0ZXJdCmhvc3RuYW1lID0gcm91dGVyCmhvc3RhZGRyID0gMC4wLjAuMApob3N0cG9ydCA9IDgwODAKaGVhbHRoY2hlY2sgPSB0cnVlCgp3b3JrZXJzID0gNAoKW3JvdXRlcjpidWlsZF0KaW1hZ2UgPSBjb21tb246YmFzZQpzY3JpcHQgPQoJQUREIHtzZWN0aW9uLnJlcGxhY2UoJzpidWlsZCcsICcnKX0gL29wdC97c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9CglBREQgd2ViY2VydCAvb3B0L3dlYmNlcnQKCUFERCBjb21tb24gL29wdC9jb21tb24KCUFERCBkcml2ZXIgL29wdC9kcml2ZXIKCUFERCBzY2hlbWEgL29wdC9zY2hlbWEKCUFERCBjb25maWcuaW5pIC9vcHQvY29uZmlnLmluaQoJQ01EIFsicHl0aG9uIiwgIntzZWN0aW9uLnJlcGxhY2UoJzpidWlsZCcsICcnKX0iXQoJSEVBTFRIQ0hFQ0sgXAoJCS0taW50ZXJ2YWw9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfaW50ZXJ2YWwnXX1zIFwKCQktLXRpbWVvdXQ9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfdGltZW91dCddfXMgXAoJCS0tcmV0cmllcz17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja19yZXRyaWVzJ119IFwKCQlDTUQgY3VybCAtayBodHRwczovL2xvY2FsaG9zdDo4MDgwL2ludGVybmFsL2hlYWx0aCB8fCBleGl0IDEKCiNbcm91dGVyOm1vdW50c10KI1tyb3V0ZXI6ZW52aXJvbm1lbnRdCiNbcm91dGVyOnBvcnRzXQojW3JvdXRlcjp2b2x1bWVzXQoKCiMgQUNDT1VOVCAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpbYWNjb3VudF0KaG9zdG5hbWUgPSBhY2NvdW50Cmhvc3RhZGRyID0gMC4wLjAuMApob3N0cG9ydCA9IDgwODAKaGVhbHRoY2hlY2sgPSB0cnVlCgp3b3JrZXJzID0gNAoKW2FjY291bnQ6YnVpbGRdCmltYWdlID0gY29tbW9uOmJhc2UKc2NyaXB0ID0KCUFERCB7c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9IC9vcHQve3NlY3Rpb24ucmVwbGFjZSgnOmJ1aWxkJywgJycpfQoJQUREIHdlYmNlcnQgL29wdC93ZWJjZXJ0CglBREQgY29tbW9uIC9vcHQvY29tbW9uCglBREQgZHJpdmVyIC9vcHQvZHJpdmVyCglBREQgc2NoZW1hIC9vcHQvc2NoZW1hCglBREQgY29uZmlnLmluaSAvb3B0L2NvbmZpZy5pbmkKCUNNRCBbInB5dGhvbiIsICJ7c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9Il0KCUhFQUxUSENIRUNLIFwKCQktLWludGVydmFsPXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX2ludGVydmFsJ119cyBcCgkJLS10aW1lb3V0PXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX3RpbWVvdXQnXX1zIFwKCQktLXJldHJpZXM9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfcmV0cmllcyddfSBcCgkJQ01EIGN1cmwgLWsgaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MC9pbnRlcm5hbC9oZWFsdGggfHwgZXhpdCAxCgojW2FjY291bnQ6bW91bnRzXQojW2FjY291bnQ6dm9sdW1lc10KI1thY2NvdW50OmVudmlyb25tZW50XQojW2FjY291bnQ6cG9ydHNdCgoKIyBDT1JFICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCltjb3JlXQpob3N0bmFtZSA9IGNvcmUKaG9zdGFkZHIgPSAwLjAuMC4wCmhvc3Rwb3J0ID0gODA4MApoZWFsdGhjaGVjayA9IHRydWUKCiMgZG9uJ3QgY2hhbmdlIHdvcmtlcnMgY291bnQKd29ya2VycyA9IDEKCmNsZWFyX3RpY2sgPSA2MApjbGVhcl9tb2RlbF9ob3VyID0gMgpjbGVhcl9jYWNoZV9ob3VyID0gMgoKW2NvcmU6YnVpbGRdCmltYWdlID0gY29tbW9uOmJhc2UKc2NyaXB0ID0KCUFERCB7c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9IC9vcHQve3NlY3Rpb24ucmVwbGFjZSgnOmJ1aWxkJywgJycpfQoJQUREIHdlYmNlcnQgL29wdC93ZWJjZXJ0CglBREQgY29tbW9uIC9vcHQvY29tbW9uCglBREQgZHJpdmVyIC9vcHQvZHJpdmVyCglBREQgc2NoZW1hIC9vcHQvc2NoZW1hCglBREQgY29uZmlnLmluaSAvb3B0L2NvbmZpZy5pbmkKCUNNRCBbInB5dGhvbiIsICJ7c2VjdGlvbi5yZXBsYWNlKCc6YnVpbGQnLCAnJyl9Il0KCUhFQUxUSENIRUNLIFwKCQktLWludGVydmFsPXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX2ludGVydmFsJ119cyBcCgkJLS10aW1lb3V0PXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX3RpbWVvdXQnXX1zIFwKCQktLXJldHJpZXM9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfcmV0cmllcyddfSBcCgkJQ01EIGN1cmwgLWsgaHR0cHM6Ly9sb2NhbGhvc3Q6ODA4MC9pbnRlcm5hbC9oZWFsdGggfHwgZXhpdCAxCgojW2NvcmU6bW91bnRzXQojW2NvcmU6dm9sdW1lc10KI1tjb3JlOmVudmlyb25tZW50XQojW2NvcmU6cG9ydHNdCgoKIyBOR0lOWCAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCltuZ2lueF0KaG9zdG5hbWUgPSBuZ2lueApob3N0YWRkciA9IDAuMC4wLjAKaG9zdHBvcnQgPSA0NDMKaGVhbHRoY2hlY2sgPSB0cnVlCgpbbmdpbng6YnVpbGRdCmltYWdlID0gbmdpbng6YmFzZQpzY3JpcHQgPQoJQUREIHdlYnJvb3QgL3dlYnJvb3QKCUFERCB3ZWJjZXJ0IC93ZWJjZXJ0CglBREQgbmdpbngvcHlnbWEvY29uZi5kIC9ldGMvbmdpbngvY29uZi5kCglIRUFMVEhDSEVDSyBcCgkJLS1pbnRlcnZhbD17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja19pbnRlcnZhbCddfXMgXAoJCS0tdGltZW91dD17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja190aW1lb3V0J119cyBcCgkJLS1yZXRyaWVzPXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX3JldHJpZXMnXX0gXAoJCUNNRCBjdXJsIC1rIGh0dHBzOi8vMTI3LjAuMC4xIHx8IGV4aXQgMQoKW25naW54OnBvcnRzXQo0NDMvdGNwID0gMC4wLjAuMDo0NDMKOTAwMC90Y3AgPSAwLjAuMC4wOjkwMDAKCiNbbmdpbng6bW91bnRzXQojW25naW54OmVudmlyb25tZW50XQojW25naW54OnZvbHVtZXNdCgoKIyBLRVlDTE9BSyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCltrZXljbG9ha10KaG9zdG5hbWUgPSBrZXljbG9hawpob3N0YWRkciA9IDAuMC4wLjAKaG9zdHBvcnQgPSA4MDgwCmhlYWx0aGNoZWNrID0gdHJ1ZQoKdGhlbWUgPSBvcmJyaXVtCgpyZWdpc3RyYXRpb24gPSBmYWxzZQpyZXNldF9wYXNzd29yZCA9IGZhbHNlCmVtYWlsX2xvZ2luID0gZmFsc2UKCnNlc3Npb25faWRsZV90aW1lb3V0ID0gMTgwMApzZXNzaW9uX21heF9saWZlc3BhbiA9IDg2NDAwCnRva2VuX2xpZmVzcGFuID0gOTAwCgpba2V5Y2xvYWs6YnVpbGRdCmltYWdlID0ga2V5Y2xvYWs6YmFzZQpzY3JpcHQgPQoJRU5WIEtFWUNMT0FLX0FETUlOPXtpbmlbJ2RlZmF1bHQuc3lzdGVtX2FjY2Vzc19rZXknXX0KCUVOViBLRVlDTE9BS19BRE1JTl9QQVNTV09SRD17aW5pWydkZWZhdWx0LnN5c3RlbV9zZWNyZXRfa2V5J119CglSVU4gZWNobyAiZGItdXNlcm5hbWU9e2luaVsnZGVmYXVsdC5zeXN0ZW1fYWNjZXNzX2tleSddfSIgPj4gL29wdC9rZXljbG9hay9jb25mL2tleWNsb2FrLmNvbmYKCVJVTiBlY2hvICJkYi1wYXNzd29yZD17aW5pWydkZWZhdWx0LnN5c3RlbV9zZWNyZXRfa2V5J119IiA+PiAvb3B0L2tleWNsb2FrL2NvbmYva2V5Y2xvYWsuY29uZgoJUlVOIGVjaG8gImRiLXVybD1qZGJjOnBvc3RncmVzcWw6Ly97aW5pWydwb3N0Z3Jlc3FsLmhvc3RuYW1lJ119L2tleWNsb2FrIiA+PiAvb3B0L2tleWNsb2FrL2NvbmYva2V5Y2xvYWsuY29uZgoJUlVOIGVjaG8gImhvc3RuYW1lPWh0dHBzOi8ve2luaVsnZGVmYXVsdC5lbmRwb2ludCddfS9hdXRoIiA+PiAvb3B0L2tleWNsb2FrL2NvbmYva2V5Y2xvYWsuY29uZgoJUlVOIGVjaG8gImhvc3RuYW1lLWFkbWluPWh0dHBzOi8ve2luaVsnZGVmYXVsdC5lbmRwb2ludCddfS9hdXRoIiA+PiAvb3B0L2tleWNsb2FrL2NvbmYva2V5Y2xvYWsuY29uZgoKI1trZXljbG9hazplbnZpcm9ubWVudF0KI1trZXljbG9hazpwb3J0c10KI1trZXljbG9hazp2b2x1bWVzXQojW2tleWNsb2FrOm1vdW50c10KCgojIE1JTklPICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKW21pbmlvXQpob3N0bmFtZSA9IG1pbmlvCmhvc3RhZGRyID0gMC4wLjAuMApob3N0cG9ydCA9IDkwMDEKaGVhbHRoY2hlY2sgPSB0cnVlCgpbbWluaW86YnVpbGRdCmltYWdlID0gbWluaW86YmFzZQpzY3JpcHQgPQoJRU5WIERBVEFfU1RPUkVfTElTVD0vZGF0YQoJRU5WIE1JTklPX1JPT1RfVVNFUj17aW5pWydkZWZhdWx0LnN5c3RlbV9hY2Nlc3Nfa2V5J119CglFTlYgTUlOSU9fUk9PVF9QQVNTV09SRD17aW5pWydkZWZhdWx0LnN5c3RlbV9zZWNyZXRfa2V5J119CglFTlYgTUlOSU9fQlJPV1NFUl9SRURJUkVDVF9VUkw9aHR0cHM6Ly97aW5pWydkZWZhdWx0LmVuZHBvaW50J119L21pbmlvLwoJSEVBTFRIQ0hFQ0sgXAoJCS0taW50ZXJ2YWw9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfaW50ZXJ2YWwnXX1zIFwKCQktLXRpbWVvdXQ9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfdGltZW91dCddfXMgXAoJCS0tcmV0cmllcz17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja19yZXRyaWVzJ119IFwKCQlDTUQgY3VybCAtZiBodHRwOi8vbG9jYWxob3N0OjkwMDAvbWluaW8vaGVhbHRoL2xpdmUgfHwgZXhpdCAxCgpbbWluaW86dm9sdW1lc10KbWluaW8gPSAvZGF0YQoKI1ttaW5pbzplbnZpcm9ubWVudF0KI1ttaW5pbzpwb3J0c10KI1ttaW5pbzptb3VudHNdCgoKIyBHVUFDQU1PTEUgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCltndWFjZF0KaG9zdG5hbWUgPSBndWFjZApob3N0YWRkciA9IDAuMC4wLjAKaG9zdHBvcnQgPSA0ODIyCgpbZ3VhY2Q6YnVpbGRdCmltYWdlID0gZ3VhY2Q6YmFzZQpzY3JpcHQgPQoKI1tndWFjZDplbnZpcm9ubWVudF0KI1tndWFjZDpwb3J0c10KI1tndWFjZDp2b2x1bWVzXQojW2d1YWNkOm1vdW50c10KCltndWFjYW1vbGVdCmhvc3RuYW1lID0gZ3VhY2Ftb2xlCmhvc3RhZGRyID0gMC4wLjAuMApob3N0cG9ydCA9IDgwODAKCltndWFjYW1vbGU6YnVpbGRdCmltYWdlID0gZ3VhY2Ftb2xlOmJhc2UKc2NyaXB0ID0KCUVOViBHVUFDRF9IT1NUTkFNRT17aW5pWydndWFjZC5ob3N0bmFtZSddfQoJRU5WIEdVQUNEX1BPUlQ9e2luaVsnZ3VhY2QuaG9zdHBvcnQnXX0KCUVOViBQT1NUR1JFU1FMX0hPU1ROQU1FPXtpbmlbJ3Bvc3RncmVzcWwuaG9zdG5hbWUnXX0KCUVOViBQT1NUR1JFU1FMX1BPUlQ9e2luaVsncG9zdGdyZXNxbC5ob3N0cG9ydCddfQoJRU5WIFBPU1RHUkVTUUxfVVNFUj17aW5pWydkZWZhdWx0LnN5c3RlbV9hY2Nlc3Nfa2V5J119CglFTlYgUE9TVEdSRVNRTF9QQVNTV09SRD17aW5pWydkZWZhdWx0LnN5c3RlbV9zZWNyZXRfa2V5J119CglFTlYgUE9TVEdSRVNRTF9EQVRBQkFTRT1ndWFjYW1vbGUKCUVOViBQT1NUR1JFU1FMX0FVVE9fQ1JFQVRFX0FDQ09VTlRTPXRydWUKCUVOViBPUEVOSURfSVNTVUVSPWh0dHBzOi8ve2luaVsnZGVmYXVsdC5lbmRwb2ludCddfS9hdXRoL3JlYWxtcy97aW5pWydkZWZhdWx0LnRlbmFudCddfQoJRU5WIE9QRU5JRF9DTElFTlRfSUQ9Z3VhY2Ftb2xlCglFTlYgT1BFTklEX1VTRVJOQU1FX0NMQUlNX1RZUEU9cHJlZmVycmVkX3VzZXJuYW1lCglFTlYgT1BFTklEX0FVVEhPUklaQVRJT05fRU5EUE9JTlQ9aHR0cHM6Ly97aW5pWydkZWZhdWx0LmVuZHBvaW50J119L2F1dGgvcmVhbG1zL3tpbmlbJ2RlZmF1bHQudGVuYW50J119L3Byb3RvY29sL29wZW5pZC1jb25uZWN0L2F1dGgKCUVOViBPUEVOSURfSldLU19FTkRQT0lOVD1odHRwOi8ve2luaVsna2V5Y2xvYWsuaG9zdG5hbWUnXX06e2luaVsna2V5Y2xvYWsuaG9zdHBvcnQnXX0vYXV0aC9yZWFsbXMve2luaVsnZGVmYXVsdC50ZW5hbnQnXX0vcHJvdG9jb2wvb3BlbmlkLWNvbm5lY3QvY2VydHMKCUVOViBPUEVOSURfUkVESVJFQ1RfVVJJPWh0dHBzOi8ve2luaVsnZGVmYXVsdC5lbmRwb2ludCddfS90ZXJtaW5hbC9pbmRleC5odG1sCglFTlYgRVhURU5TSU9OX1BSSU9SSVRZPSosb3BlbmlkCgojW2d1YWNhbW9sZTplbnZpcm9ubWVudF0KI1tndWFjYW1vbGU6cG9ydHNdCiNbZ3VhY2Ftb2xlOnZvbHVtZXNdCiNbZ3VhY2Ftb2xlOm1vdW50c10KCgojIENPTlNPTEUgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKW2NvbnNvbGVdCmhvc3RuYW1lID0gY29uc29sZQpob3N0YWRkciA9IDAuMC4wLjAKaG9zdHBvcnQgPSAyMgoKW2NvbnNvbGU6YnVpbGRdCmltYWdlID0gY29uc29sZTpiYXNlCnNjcmlwdCA9CglSVU4gZWNobyAtbiAncm9vdDp7aW5pWydkZWZhdWx0LnN5c3RlbV9zZWNyZXRfa2V5J119JyB8IGNocGFzc3dkCgojW2NvbnNvbGU6bW91bnRzXQojW2NvbnNvbGU6ZW52aXJvbm1lbnRdCiNbY29uc29sZTpwb3J0c10KI1tjb25zb2xlOnZvbHVtZXNdCgoKIyBSRURJUyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCltyZWRpc10KaG9zdG5hbWUgPSByZWRpcwpob3N0YWRkciA9IDAuMC4wLjAKaG9zdHBvcnQgPSA2Mzc5CmhlYWx0aGNoZWNrID0gdHJ1ZQoKW3JlZGlzOnNlc3Npb25dCmRhdGFiYXNlID0gMApleHBpcmUgPSAzMDAKCltyZWRpczpwb2NrZXRdCmRhdGFiYXNlID0gMQoKW3JlZGlzOnF1ZXVlXQpkYXRhYmFzZSA9IDIKCltyZWRpczptb2RlbF0KZGF0YWJhc2UgPSAzCmV4cGlyZSA9IDM2MDAKCltyZWRpczpidWlsZF0KaW1hZ2UgPSByZWRpczpiYXNlCnNjcmlwdCA9CglIRUFMVEhDSEVDSyBcCgkJLS1pbnRlcnZhbD17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja19pbnRlcnZhbCddfXMgXAoJCS0tdGltZW91dD17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja190aW1lb3V0J119cyBcCgkJLS1yZXRyaWVzPXtpbmlbJ2RlZmF1bHQuaGVhbHRoX2NoZWNrX3JldHJpZXMnXX0gXAoJCUNNRCByZWRpcy1jbGkgLS1yYXcgaW5jciBwaW5nIHx8IGV4aXQgMQoKW3JlZGlzOnZvbHVtZXNdCnJlZGlzID0gL2RhdGEKCiNbcmVkaXM6ZW52aXJvbm1lbnRdCiNbcmVkaXM6cG9ydHNdCiNbcmVkaXM6bW91bnRzXQoKCiMgRUxBU1RJQyBTRUFSQ0ggIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpbZWxhc3RpY3NlYXJjaF0KaG9zdG5hbWUgPSBlbGFzdGljc2VhcmNoCmhvc3RhZGRyID0gMC4wLjAuMApob3N0cG9ydCA9IDkyMDAKaGVhbHRoY2hlY2sgPSB0cnVlCgojIHNoYXJkcyB0b3RhbCA9PSAxMDAwCiMgc2hhcmRzIDw9IHRvdGFsIGNsdXN0ZXIgbWVtb3J5KGhlYXApICogMjAKc2hhcmRzID0gMjAKcmVwbGljYXMgPSAwCmV4cGlyZSA9IDYwNDgwMAoKW2VsYXN0aWNzZWFyY2g6YnVpbGRdCmltYWdlID0gZWxhc3RpY3NlYXJjaDpiYXNlCnNjcmlwdCA9CglFTlYgZGlzY292ZXJ5LnR5cGU9c2luZ2xlLW5vZGUKCUVOViBTWVNURU1fQUNDRVNTX0tFWT17aW5pWydkZWZhdWx0LnN5c3RlbV9hY2Nlc3Nfa2V5J119CglFTlYgU1lTVEVNX1NFQ1JFVF9LRVk9e2luaVsnZGVmYXVsdC5zeXN0ZW1fc2VjcmV0X2tleSddfQoJSEVBTFRIQ0hFQ0sgXAoJCS0taW50ZXJ2YWw9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfaW50ZXJ2YWwnXX1zIFwKCQktLXRpbWVvdXQ9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfdGltZW91dCddfXMgXAoJCS0tcmV0cmllcz17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja19yZXRyaWVzJ119IFwKCQlDTUQgY3VybCAtayBodHRwczovL2xvY2FsaG9zdDo5MjAwIHx8IGV4aXQgMQoKW2VsYXN0aWNzZWFyY2g6dm9sdW1lc10KZWxhc3RpY3NlYXJjaCA9IC91c3Ivc2hhcmUvZWxhc3RpY3NlYXJjaAoKI1tlbGFzdGljc2VhcmNoOmVudmlyb25tZW50XQojW2VsYXN0aWNzZWFyY2g6cG9ydHNdCiNbZWxhc3RpY3NlYXJjaDptb3VudHNdCgoKIyBQT1NUR1JFU1FMICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCltwb3N0Z3Jlc3FsXQpob3N0bmFtZSA9IHBvc3RncmVzcWwKaG9zdGFkZHIgPSAwLjAuMC4wCmhvc3Rwb3J0ID0gNTQzMgpoZWFsdGhjaGVjayA9IHRydWUKCltwb3N0Z3Jlc3FsOmJ1aWxkXQppbWFnZSA9IHBvc3RncmVzcWw6YmFzZQpzY3JpcHQgPQoJRU5WIERBVEFCQVNFX1VTRVI9e2luaVsnZGVmYXVsdC5zeXN0ZW1fYWNjZXNzX2tleSddfQoJRU5WIFBPU1RHUkVTX1BBU1NXT1JEPXtpbmlbJ2RlZmF1bHQuc3lzdGVtX3NlY3JldF9rZXknXX0KCUFERCBwb3N0Z3Jlc3FsL3B5Z21hIC9weWdtYQoJUlVOIGVjaG8gIi4gL3B5Z21hL2luaXQuc2giID4gL2RvY2tlci1lbnRyeXBvaW50LWluaXRkYi5kL2luaXQuc2gKCUNNRCBbIi1jIiwgImNvbmZpZ19maWxlPS9weWdtYS9wb3N0Z3Jlc3FsLmNvbmYiXQoJSEVBTFRIQ0hFQ0sgXAoJCS0taW50ZXJ2YWw9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfaW50ZXJ2YWwnXX1zIFwKCQktLXRpbWVvdXQ9e2luaVsnZGVmYXVsdC5oZWFsdGhfY2hlY2tfdGltZW91dCddfXMgXAoJCS0tcmV0cmllcz17aW5pWydkZWZhdWx0LmhlYWx0aF9jaGVja19yZXRyaWVzJ119IFwKCQlDTUQgcGdfaXNyZWFkeSAtLXVzZXJuYW1lIHBvc3RncmVzIHx8IGV4aXQgMQoKW3Bvc3RncmVzcWw6dm9sdW1lc10KcG9zdGdyZXNxbCA9IC92YXIvbGliL3Bvc3RncmVzcWwvZGF0YQoKI1twb3N0Z3Jlc3FsOmVudmlyb25tZW50XQojW3Bvc3RncmVzcWw6cG9ydHNdCiNbcG9zdGdyZXNxbDptb3VudHNdCgoKIyBPUEVOTERBUCAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCltsZGFwXQpob3N0bmFtZSA9IHtpbmlbJ2RlZmF1bHQuZW5kcG9pbnQnXX0KaG9zdGFkZHIgPSAwLjAuMC4wCmhvc3Rwb3J0ID0gNjM2CgpbbGRhcDpidWlsZF0KaW1hZ2UgPSBsZGFwOmJhc2UKc2NyaXB0ID0KCVJVTiBybSAtcmYgL2NvbnRhaW5lci9zZXJ2aWNlL3NsYXBkL2Fzc2V0cy9jZXJ0cwoJQUREIHdlYmNlcnQgL2NvbnRhaW5lci9zZXJ2aWNlL3NsYXBkL2Fzc2V0cy9jZXJ0cwoJQUREIGxkYXAvcHlnbWEvY29uZi5kL2N1c3RvbS5sZGlmIC9jb250YWluZXIvc2VydmljZS9zbGFwZC9hc3NldHMvY29uZmlnL2Jvb3RzdHJhcC9sZGlmLzUwLWJvb3RzdHJhcC5sZGlmCglFTlYgTERBUF9ET01BSU49e2luaVsnZGVmYXVsdC5kb21haW4nXX0KCUVOViBMREFQX0JBU0VfRE49InsnLCcuam9pbihbJ2RjPScgKyBkYyBmb3IgZGMgaW4gaW5pWydkZWZhdWx0LmRvbWFpbiddLnNwbGl0KCcuJyldKX0iCglFTlYgTERBUF9BRE1JTl9QQVNTV09SRD17aW5pWydkZWZhdWx0LnN5c3RlbV9zZWNyZXRfa2V5J119CglFTlYgTERBUF9DT05GSUdfUEFTU1dPUkQ9e2luaVsnZGVmYXVsdC5zeXN0ZW1fc2VjcmV0X2tleSddfQoJRU5WIExEQVBfVExTX1ZFUklGWV9DTElFTlQ9dHJ5CglFTlYgTERBUF9UTFNfQ0FfQ1JUX0ZJTEVOQU1FPWNhLmNydAoJRU5WIExEQVBfVExTX0NSVF9GSUxFTkFNRT1zZXJ2ZXIuY3J0CglFTlYgTERBUF9UTFNfS0VZX0ZJTEVOQU1FPXNlcnZlci5rZXkKCltsZGFwOnZvbHVtZXNdCmxkYXAtbWRiID0gL3Zhci9saWIvbGRhcApsZGFwLWNuZiA9IC9ldGMvbGRhcC9zbGFwZC5kCgpbbGRhcDpwb3J0c10KNjM2L3RjcCA9IDAuMC4wLjA6NjM2CgojW2xkYXA6ZW52aXJvbm1lbnRdCgojW2xkYXA6bW91bnRzXQoKW2xkYXBhZG1dCmhvc3RuYW1lID0gbGRhcGFkbQpob3N0YWRkciA9IDAuMC4wLjAKaG9zdHBvcnQgPSA0NDMKCltsZGFwYWRtOmJ1aWxkXQppbWFnZSA9IGxkYXBhZG06YmFzZQpzY3JpcHQgPQoJUlVOIHJtIC1yZiAvY29udGFpbmVyL3NlcnZpY2UvbGRhcC1jbGllbnQvYXNzZXRzL2NlcnRzCglBREQgd2ViY2VydCAvY29udGFpbmVyL3NlcnZpY2UvbGRhcC1jbGllbnQvYXNzZXRzL2NlcnRzCglFTlYgUEhQTERBUEFETUlOX0xEQVBfSE9TVFM9e2luaVsnbGRhcC5ob3N0bmFtZSddfQoJRU5WIFBIUExEQVBBRE1JTl9IVFRQUz10cnVlCglFTlYgUEhQTERBUEFETUlOX0xEQVBfQ0xJRU5UX1RMU19DQV9DUlRfRklMRU5BTUU9Y2EuY3J0CglFTlYgUEhQTERBUEFETUlOX0xEQVBfQ0xJRU5UX1RMU19DUlRfRklMRU5BTUU9c2VydmVyLmNydAoJRU5WIFBIUExEQVBBRE1JTl9MREFQX0NMSUVOVF9UTFNfS0VZX0ZJTEVOQU1FPXNlcnZlci5rZXkKCltsZGFwYWRtOnBvcnRzXQo0NDMvdGNwID0gMC4wLjAuMDo4Mzg5CgojW2xkYXBhZG06ZW52aXJvbm1lbnRdCiNbbGRhcGFkbTp2b2x1bWVzXQojW2xkYXBhZG06bW91bnRzXQ=="

echo "==================================================="
echo "# ENVIRONMENTS                                    #"
echo "==================================================="
while true; do
read -p "DOCKER_SOCK [default:/var/run/docker.sock]: " DOCKER_SOCK
if [ -n "$DOCKER_SOCK" ]; then
export DOCKER_SOCK=$DOCKER_SOCK
else
export DOCKER_SOCK="/var/run/docker.sock"
fi
if [ -e $DOCKER_SOCK ]; then
echo "  --> $DOCKER_SOCK [ OK ]"
break
else
echo "  --> $DOCKER_SOCK [ Failed ]"
fi
done
while true; do read -p "ENTER SYSTEM_ACCESS_KEY: " SYSTEM_ACCESS_KEY; if [ -n "$SYSTEM_ACCESS_KEY" ]; then export SYSTEM_ACCESS_KEY=$SYSTEM_ACCESS_KEY; break; fi; done
while true; do read -p "ENTER SYSTEM_SECRET_KEY: " SYSTEM_SECRET_KEY; if [ -n "$SYSTEM_SECRET_KEY" ]; then export SYSTEM_SECRET_KEY=$SYSTEM_SECRET_KEY; break; fi; done
echo "==================================================="
echo ""

echo "==================================================="
echo "# DEFAULT SETTINGS                                #"
echo "==================================================="
while true; do read -p "ENTER DEFAULT_DOMAIN: " DEFAULT_DOMAIN; if [ -n "$DEFAULT_DOMAIN" ]; then export DEFAULT_DOMAIN=$DEFAULT_DOMAIN; break; fi; done
while true; do read -p "ENTER DEFAULT_ENDPOINT: " DEFAULT_ENDPOINT; if [ -n "$DEFAULT_ENDPOINT" ]; then export DEFAULT_ENDPOINT=$DEFAULT_ENDPOINT; break; fi; done
while true; do read -p "ENTER DEFAULT_ADMIN_USERNAME: " DEFAULT_ADMIN_USERNAME; if [ -n "$DEFAULT_ADMIN_USERNAME" ]; then export DEFAULT_ADMIN_USERNAME=$DEFAULT_ADMIN_USERNAME; break; fi; done
while true; do read -p "ENTER DEFAULT_ADMIN_PASSWORD: " DEFAULT_ADMIN_PASSWORD; if [ -n "$DEFAULT_ADMIN_PASSWORD" ]; then export DEFAULT_ADMIN_PASSWORD=$DEFAULT_ADMIN_PASSWORD; break; fi; done
echo "==================================================="
echo ""

echo "==================================================="
echo "# CLOUD SETTINGS                                  #"
echo "==================================================="
while true; do read -p "ENTER CLOUD_DOMAIN: " CLOUD_DOMAIN; if [ -n "$CLOUD_DOMAIN" ]; then export CLOUD_DOMAIN=$CLOUD_DOMAIN; break; fi; done
while true; do read -p "ENTER ADMIN_PROJECT: " ADMIN_PROJECT; if [ -n "$ADMIN_PROJECT" ]; then export ADMIN_PROJECT=$ADMIN_PROJECT; break; fi; done
while true; do read -p "ENTER PRIME_PROJECT: " PRIME_PROJECT; if [ -n "$PRIME_PROJECT" ]; then export PRIME_PROJECT=$PRIME_PROJECT; break; fi; done
while true; do read -p "ENTER WSA_HOSTNAME: " WSA_HOSTNAME; if [ -n "$WSA_HOSTNAME" ]; then export WSA_HOSTNAME=$WSA_HOSTNAME; break; fi; done
while true; do read -p "ENTER WSA_CLIENT_ID: " WSA_CLIENT_ID; if [ -n "$WSA_CLIENT_ID" ]; then export WSA_CLIENT_ID=$WSA_CLIENT_ID; break; fi; done
while true; do read -p "ENTER WSA_CLIENT_SECRET: " WSA_CLIENT_SECRET; if [ -n "$WSA_CLIENT_SECRET" ]; then export WSA_CLIENT_SECRET=$WSA_CLIENT_SECRET; break; fi; done
while true; do read -p "ENTER WSA_ADMIN_USERNAME: " WSA_ADMIN_USERNAME; if [ -n "$WSA_ADMIN_USERNAME" ]; then export WSA_ADMIN_USERNAME=$WSA_ADMIN_USERNAME; break; fi; done
while true; do read -p "ENTER WSA_ADMIN_PASSWORD: " WSA_ADMIN_PASSWORD; if [ -n "$WSA_ADMIN_PASSWORD" ]; then export WSA_ADMIN_PASSWORD=$WSA_ADMIN_PASSWORD; break; fi; done
echo "==================================================="
echo ""

echo "==================================================="
echo "# SMTP SETTINGS                                   #"
echo "==================================================="
while true; do read -p "ENTER SMTP_HOSTNAME: " SMTP_HOSTNAME; if [ -n "$SMTP_HOSTNAME" ]; then export SMTP_HOSTNAME=$SMTP_HOSTNAME; break; fi; done
while true; do read -p "ENTER SMTP_HOSTPORT: " SMTP_HOSTPORT; if [ -n "$SMTP_HOSTPORT" ]; then export SMTP_HOSTPORT=$SMTP_HOSTPORT; break; fi; done
while true; do read -p "ENTER SMTP_USERNAME: " SMTP_USERNAME; if [ -n "$SMTP_USERNAME" ]; then export SMTP_USERNAME=$SMTP_USERNAME; break; fi; done
while true; do read -p "ENTER SMTP_PASSWORD: " SMTP_PASSWORD; if [ -n "$SMTP_PASSWORD" ]; then export SMTP_PASSWORD=$SMTP_PASSWORD; break; fi; done
while true; do read -p "ENTER SMTP_TLS [true or false]: " SMTP_TLS; if [ "$SMTP_TLS" == "true" ] || [ "$SMTP_TLS" == "false" ]; then export SMTP_TLS=$SMTP_TLS; break; fi; done
while true; do read -p "ENTER SMTP_SSL [true or false]: " SMTP_SSL; if [ "$SMTP_SSL" == "true" ] || [ "$SMTP_SSL" == "false" ]; then export SMTP_SSL=$SMTP_SSL; break; fi; done
echo "==================================================="
echo ""

echo "==================================================="
echo "# Confirming                                      #"
echo "==================================================="
echo "DOCKER_SOCK            = $DOCKER_SOCK"
echo "SYSTEM_ACCESS_KEY      = $SYSTEM_ACCESS_KEY"
echo "SYSTEM_SECRET_KEY      = $SYSTEM_SECRET_KEY"
echo "---------------------------------------------------"
echo "DEFAULT_DOMAIN         = $DEFAULT_DOMAIN"
echo "DEFAULT_ENDPOINT       = $DEFAULT_ENDPOINT"
echo "DEFAULT_ADMIN_USERNAME = $DEFAULT_ADMIN_USERNAME"
echo "DEFAULT_ADMIN_PASSWORD = $DEFAULT_ADMIN_PASSWORD"
echo "---------------------------------------------------"
echo "CLOUD_DOMAIN           = $CLOUD_DOMAIN"
echo "ADMIN_PROJECT          = $ADMIN_PROJECT"
echo "PRIME_PROJECT          = $PRIME_PROJECT"
echo "WSA_HOSTNAME           = $WSA_HOSTNAME"
echo "WSA_CLIENT_ID          = $WSA_CLIENT_ID"
echo "WSA_CLIENT_SECRET      = $WSA_CLIENT_SECRET"
echo "WSA_ADMIN_USERNAME     = $WSA_ADMIN_USERNAME"
echo "WSA_ADMIN_PASSWORD     = $WSA_ADMIN_PASSWORD"
echo "---------------------------------------------------"
echo "SMTP_HOSTNAME          = $SMTP_HOSTNAME"
echo "SMTP_HOSTPORT          = $SMTP_HOSTPORT"
echo "SMTP_USERNAME          = $SMTP_USERNAME"
echo "SMTP_PASSWORD          = $SMTP_PASSWORD"
echo "SMTP_TLS               = $SMTP_TLS"
echo "SMTP_SSL               = $SMTP_SSL"
echo "==================================================="
echo ""

read -p "PRESS ENTER TO MAKE CONFIG FILE"
echo $CONF_BIN | base64 -d | tee $CONF_INI.tmp >/dev/null
envsubst < $CONF_INI.tmp > $CONF_INI
rm -rf $CONF_INI.tmp
echo "$CONF_INI is generated"
echo ""

read -p "PRESS ENTER TO BUILD INSTALLER: orbrium/install:$DEFAULT_STAGE"
docker network create orbrium
docker rmi orbrium/install:$DEFAULT_STAGE
docker build -t orbrium/install:$DEFAULT_STAGE-active -f - / <<EOF
FROM orbrium/install:$DEFAULT_STAGE
ADD $CONF_INI /opt/orbrium/config.ini
ADD $WORKING_DIR/ca.crt /opt/orbrium/webcert/ca.crt
ADD $WORKING_DIR/ca.key /opt/orbrium/webcert/ca.key
ADD $WORKING_DIR/server.crt /opt/orbrium/webcert/server.crt
ADD $WORKING_DIR/server.key /opt/orbrium/webcert/server.key
EOF
rm -rf $CONF_INI
echo ""

read -p "PRESS ENTER TO BUILD RUNTIME CONTAINERS"
docker run -ti --rm \
	-v $DOCKER_SOCK:/var/run/docker.sock \
	orbrium/install:$DEFAULT_STAGE-active \
	python pygma.py -b all
echo ""

read -p "PRESS ENTER TO DEPLOY RUNTIME CONTAINERS"
docker run -ti --rm \
	-v $DOCKER_SOCK:/var/run/docker.sock \
	orbrium/install:$DEFAULT_STAGE-active \
	python pygma.py -d all
echo ""
echo "FINISHED"
echo ""
echo "LET'S GO ORBRIUM!!!"
echo "  --> https://$DEFAULT_ENDPOINT"
echo ""
